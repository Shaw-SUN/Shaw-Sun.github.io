(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{297:function(t,a,s){"use strict";s.r(a);var n=s(10),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ajax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax"}},[t._v("#")]),t._v(" Ajax")]),t._v(" "),a("h2",{attrs:{id:"http-hyper-text-transfer-protocol-超文本传输协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-hyper-text-transfer-protocol-超文本传输协议"}},[t._v("#")]),t._v(" Http ("),a("em",[t._v("Hyper Text Transfer Protocol 超文本传输协议")]),t._v(")")]),t._v(" "),a("p",[t._v("基于 TCP/IP 通信协议来传递数据")]),t._v(" "),a("h3",{attrs:{id:"https-hypertext-transfer-protocol-secure-超文本传输安全协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-hypertext-transfer-protocol-secure-超文本传输安全协议"}},[t._v("#")]),t._v(" HTTPS ("),a("em",[t._v("HyperText Transfer Protocol Secure 超文本传输安全协议")]),t._v(")")]),t._v(" "),a("p",[t._v("经由 HTTP 进行通信，利用 SSL/TLS 来加密数据包"),a("br"),t._v("\n供对网站服务器的身份认证，保护交换资料的隐私与完整性"),a("br"),t._v("\nHTTP 默认使用端口 80，而 HTTPS 默认使用端口 443")]),t._v(" "),a("h3",{attrs:{id:"http-请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-请求"}},[t._v("#")]),t._v(" http 请求")]),t._v(" "),a("p",[t._v("其中 HTTP 1.0 定义了三种请求方法： "),a("code",[t._v("GET")]),t._v(", "),a("code",[t._v("POST")]),t._v(" 和 "),a("code",[t._v("HEAD")]),t._v(" 方法。\nHTTP 1.1 新增了五种请求方法："),a("code",[t._v("OPTIONS")]),t._v(", "),a("code",[t._v("PUT")]),t._v(", "),a("code",[t._v("DELETE")]),t._v(", "),a("code",[t._v("TRACE")]),t._v(" 和 "),a("code",[t._v("CONNECT")]),t._v(" 方法。")]),t._v(" "),a("ul",[a("li",[t._v("get")]),t._v(" "),a("li",[t._v("post")]),t._v(" "),a("li",[t._v("put")]),t._v(" "),a("li",[t._v("delete")])]),t._v(" "),a("p",[t._v("http 请求本身不会进行操作，具体操作由后端服务器实现与响应，请求方法名只是约定")]),t._v(" "),a("blockquote",[a("p",[t._v("http 请求的异同 ？")])]),t._v(" "),a("h3",{attrs:{id:"http-请求状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-请求状态码"}},[t._v("#")]),t._v(" http 请求状态码")]),t._v(" "),a("ul",[a("li",[t._v("200：请求成功")]),t._v(" "),a("li",[t._v("301：资源被永久转移到其它 URL")]),t._v(" "),a("li",[t._v("404：请求的资源（网页等）不存在")]),t._v(" "),a("li",[t._v("500：内部服务器错误")])]),t._v(" "),a("h2",{attrs:{id:"ajax-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax-2"}},[t._v("#")]),t._v(" ajax")]),t._v(" "),a("p",[t._v("按需加载数据，异步数据，数据格式通常为 json("),a("em",[t._v("js 对象表示法")]),t._v(")")]),t._v(" "),a("h3",{attrs:{id:"readystate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readystate"}},[t._v("#")]),t._v(" readyState")]),t._v(" "),a("ul",[a("li",[t._v("0 : 请求未初始化")]),t._v(" "),a("li",[t._v("1 ：服务器链接已建立")]),t._v(" "),a("li",[t._v("2 ：请求已接受")]),t._v(" "),a("li",[t._v("3 ：请求处理中")]),t._v(" "),a("li",[t._v("4 ：请求已完成，响应已就绪")])]),t._v(" "),a("h2",{attrs:{id:"axios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#axios"}},[t._v("#")]),t._v(" axios")]),t._v(" "),a("p",[t._v("封装 ajax")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("axios"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\naxios"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" params "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),a("blockquote",[a("p",[t._v("同源请求：相同 IP、端口；默认无法使用 ajax")])]),t._v(" "),a("h3",{attrs:{id:"jsonp-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonp-原理"}},[t._v("#")]),t._v(" jsonp 原理")]),t._v(" "),a("p",[t._v("利用 "),a("code",[t._v("<script>")]),t._v(" 标签跨域引入 js 文件\n并不是 ajax，实质是 get 请求")]),t._v(" "),a("blockquote",[a("p",[t._v("koa (第三方封装)")]),t._v(" "),a("p",[t._v("后端：引入 jsonp\n前端：jquery 设置 "),a("code",[t._v('dataType:"jsonp"')])])]),t._v(" "),a("h3",{attrs:{id:"设置响应头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置响应头"}},[t._v("#")]),t._v(" "),a("strong",[t._v("设置响应头")])]),t._v(" "),a("p",[t._v("后端：设置服务器响应头信息 "),a("code",[t._v("ctx.set('Access-Control-Allow-Origin', 'url')")]),t._v(" ("),a("em",[t._v("url 为"),a("code",[t._v("_")]),t._v("则允许所有")]),t._v(")"),a("br"),t._v("\n由于存在安全问题，一般开发环境(前后端分离)设置，部署生产环境则不跨域")])])}),[],!1,null,null,null);a.default=r.exports}}]);